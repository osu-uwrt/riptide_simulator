<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from Unity/riptide_simulator/Assets/URDF/riptide_descriptions/robots/puddles.xacro | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="puddles">
  <!-- Due to uuv_sim, base_link must be near center of vehicle -->
  <link name="puddles/base_link"/>
  <!-- Origin to define all coordinates relative to -->
  <link name="puddles/origin">
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://riptide_descriptions/meshes/Puddles.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://riptide_descriptions/meshes/Puddles.dae" scale="1 1 1"/>
      </geometry>
    </collision>
  </link>
  <joint name="puddles/origin_joint" type="fixed">
    <parent link="puddles/base_link"/>
    <child link="puddles/origin"/>
    <origin rpy="0 0 0" xyz="-0.397 0.205 -0.17"/>
  </joint>
  <link name="puddles/base_inertia">
    <inertial>
      <mass value="39.825"/>
      <inertia ixx="1.32" ixy="0.0" ixz="0.0" iyy="2.84" iyz="0.0" izz="3.65"/>
    </inertial>
  </link>
  <joint name="puddles/inertia_joint" type="fixed">
    <parent link="puddles/origin"/>
    <child link="puddles/base_inertia"/>
    <origin rpy="0 0 0" xyz="0.397 -0.205 0.17"/>
  </joint>
  <!-- Set up hydrodynamic plugin -->
  <gazebo>
    <plugin filename="libuuv_underwater_object_ros_plugin.so" name="uuv_plugin">
      <fluid_density>1000</fluid_density>
      <flow_velocity_topic>hydrodynamics/current_velocity</flow_velocity_topic>
      <debug>0</debug>
      <link name="puddles/base_link">
        <volume>0.041411663076</volume>
        <!-- COB is relative to center of base_link, thus the math -->
        <center_of_buoyancy>0.03016637435299996 -2.554490000000742e-06 0.036254579484999994</center_of_buoyancy>
        <hydrodynamic_model>
          <!--clairedune.kippou.fr/Fossen.pdf-->
          <type>fossen</type>
          <added_mass>
                    0 0 0 0 0 0
                    0 0 0 0 0 0
                    0 0 0 0 0 0
                    0 0 0 0 0 0
                    0 0 0 0 0 0
                    0 0 0 0 0 0
                </added_mass>
          <linear_damping>
                    -51 -50 -50.0 -2 -4.5 -2.5
                </linear_damping>
          <quadratic_damping>
                    -23 -460.0 -460.0 -6 -12 -12
                </quadratic_damping>
        </hydrodynamic_model>
      </link>
    </plugin>
  </gazebo>
  <!-- Everything here is ENU frame -->
  <link name="puddles/dvl_link">
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="1e-06" radius="1e-06"/>
      </geometry>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
    </collision>
  </link>
  <joint name="puddles/dvl_joint" type="revolute">
    <origin rpy="0 0 -2.35619" xyz="0.3302 0.005 0.1289"/>
    <parent link="puddles/origin"/>
    <child link="puddles/dvl_link"/>
    <limit effort="0" lower="0" upper="0" velocity="0"/>
    <axis xyz="1 0 0"/>
  </joint>
  <link name="puddles/dvl_sonar0_link">
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="1e-06" radius="1e-06"/>
      </geometry>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
    </collision>
  </link>
  <joint name="puddles/dvl_sonar0_joint" type="fixed">
    <origin rpy="0 1.309 -0.7854" xyz="0 0 0"/>
    <parent link="puddles/dvl_link"/>
    <child link="puddles/dvl_sonar0_link"/>
  </joint>
  <gazebo reference="puddles/dvl_sonar0_link">
    <sensor name="dvl_sonar0" type="ray">
      <pose>0 0 0 0 0 0</pose>
      <update_rate>8</update_rate>
      <visualize>false</visualize>
      <ray>
        <scan>
          <horizontal>
            <samples>3</samples>
            <resolution>1</resolution>
            <min_angle>-0.03</min_angle>
            <max_angle>0.03</max_angle>
          </horizontal>
          <vertical>
            <samples>3</samples>
            <resolution>1</resolution>
            <min_angle>-0.03</min_angle>
            <max_angle>0.03</max_angle>
          </vertical>
        </scan>
        <range>
          <min>0.55</min>
          <max>10</max>
          <resolution>0.01</resolution>
        </range>
      </ray>
      <plugin filename="libgazebo_ros_range.so" name="dvl_sonar0">
        <gaussianNoise>0.005</gaussianNoise>
        <alwaysOn>true</alwaysOn>
        <updateRate>8</updateRate>
        <topicName>dvl_sonar0</topicName>
        <frameName>puddles/dvl_sonar0_link</frameName>
        <fov>0.06</fov>
        <radiation>ultrasound</radiation>
      </plugin>
    </sensor>
  </gazebo>
  <link name="puddles/dvl_sonar1_link">
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="1e-06" radius="1e-06"/>
      </geometry>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
    </collision>
  </link>
  <joint name="puddles/dvl_sonar1_joint" type="fixed">
    <origin rpy="0 1.309 -2.35619" xyz="0 0 0"/>
    <parent link="puddles/dvl_link"/>
    <child link="puddles/dvl_sonar1_link"/>
  </joint>
  <gazebo reference="puddles/dvl_sonar1_link">
    <sensor name="dvl_sonar1" type="ray">
      <pose>0 0 0 0 0 0</pose>
      <update_rate>8</update_rate>
      <visualize>false</visualize>
      <ray>
        <scan>
          <horizontal>
            <samples>3</samples>
            <resolution>1</resolution>
            <min_angle>-0.03</min_angle>
            <max_angle>0.03</max_angle>
          </horizontal>
          <vertical>
            <samples>3</samples>
            <resolution>1</resolution>
            <min_angle>-0.03</min_angle>
            <max_angle>0.03</max_angle>
          </vertical>
        </scan>
        <range>
          <min>0.55</min>
          <max>10</max>
          <resolution>0.01</resolution>
        </range>
      </ray>
      <plugin filename="libgazebo_ros_range.so" name="dvl_sonar1">
        <gaussianNoise>0.005</gaussianNoise>
        <alwaysOn>true</alwaysOn>
        <updateRate>8</updateRate>
        <topicName>dvl_sonar1</topicName>
        <frameName>puddles/dvl_sonar1_link</frameName>
        <fov>0.06</fov>
        <radiation>ultrasound</radiation>
      </plugin>
    </sensor>
  </gazebo>
  <link name="puddles/dvl_sonar2_link">
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="1e-06" radius="1e-06"/>
      </geometry>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
    </collision>
  </link>
  <joint name="puddles/dvl_sonar2_joint" type="fixed">
    <origin rpy="0 1.309 2.35619" xyz="0 0 0"/>
    <parent link="puddles/dvl_link"/>
    <child link="puddles/dvl_sonar2_link"/>
  </joint>
  <gazebo reference="puddles/dvl_sonar2_link">
    <sensor name="dvl_sonar2" type="ray">
      <pose>0 0 0 0 0 0</pose>
      <update_rate>8</update_rate>
      <visualize>false</visualize>
      <ray>
        <scan>
          <horizontal>
            <samples>3</samples>
            <resolution>1</resolution>
            <min_angle>-0.03</min_angle>
            <max_angle>0.03</max_angle>
          </horizontal>
          <vertical>
            <samples>3</samples>
            <resolution>1</resolution>
            <min_angle>-0.03</min_angle>
            <max_angle>0.03</max_angle>
          </vertical>
        </scan>
        <range>
          <min>0.55</min>
          <max>10</max>
          <resolution>0.01</resolution>
        </range>
      </ray>
      <plugin filename="libgazebo_ros_range.so" name="dvl_sonar2">
        <gaussianNoise>0.005</gaussianNoise>
        <alwaysOn>true</alwaysOn>
        <updateRate>8</updateRate>
        <topicName>dvl_sonar2</topicName>
        <frameName>puddles/dvl_sonar2_link</frameName>
        <fov>0.06</fov>
        <radiation>ultrasound</radiation>
      </plugin>
    </sensor>
  </gazebo>
  <link name="puddles/dvl_sonar3_link">
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="1e-06" radius="1e-06"/>
      </geometry>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
    </collision>
  </link>
  <joint name="puddles/dvl_sonar3_joint" type="fixed">
    <origin rpy="0 1.309 0.7854" xyz="0 0 0"/>
    <parent link="puddles/dvl_link"/>
    <child link="puddles/dvl_sonar3_link"/>
  </joint>
  <gazebo reference="puddles/dvl_sonar3_link">
    <sensor name="dvl_sonar3" type="ray">
      <pose>0 0 0 0 0 0</pose>
      <update_rate>8</update_rate>
      <visualize>false</visualize>
      <ray>
        <scan>
          <horizontal>
            <samples>3</samples>
            <resolution>1</resolution>
            <min_angle>-0.03</min_angle>
            <max_angle>0.03</max_angle>
          </horizontal>
          <vertical>
            <samples>3</samples>
            <resolution>1</resolution>
            <min_angle>-0.03</min_angle>
            <max_angle>0.03</max_angle>
          </vertical>
        </scan>
        <range>
          <min>0.55</min>
          <max>10</max>
          <resolution>0.01</resolution>
        </range>
      </ray>
      <plugin filename="libgazebo_ros_range.so" name="dvl_sonar3">
        <gaussianNoise>0.005</gaussianNoise>
        <alwaysOn>true</alwaysOn>
        <updateRate>8</updateRate>
        <topicName>dvl_sonar3</topicName>
        <frameName>puddles/dvl_sonar3_link</frameName>
        <fov>0.06</fov>
        <radiation>ultrasound</radiation>
      </plugin>
    </sensor>
  </gazebo>
  <gazebo>
    <plugin filename="libuuv_gazebo_ros_dvl_plugin.so" name="libuuv_gazebo_dvl_plugin">
      <robot_namespace>puddles</robot_namespace>
      <!-- (string, required): ros namespace in which the messages are published -->
      <link_name>puddles/dvl_link</link_name>
      <sensor_topic>dvl</sensor_topic>
      <!-- (string): name of the sensor output topic and prefix of service names -->
      <update_rate>8</update_rate>
      <!-- Update period [s] -->
      <noise_sigma>0.001</noise_sigma>
      <!-- std dev of velocity estimates in x, y, z [m/s] -->
      <noise_amplitude>1</noise_amplitude>
      <enable_gazebo_messages>false</enable_gazebo_messages>
      <enable_local_ned_frame>false</enable_local_ned_frame>
      <static_reference_frame>world</static_reference_frame>
      <!-- Declaring the beams -->
      <beam_link_name_0>puddles/dvl_sonar0_link</beam_link_name_0>
      <beam_link_name_1>puddles/dvl_sonar1_link</beam_link_name_1>
      <beam_link_name_2>puddles/dvl_sonar2_link</beam_link_name_2>
      <beam_link_name_3>puddles/dvl_sonar3_link</beam_link_name_3>
      <!-- Declaring the beam output topics -->
      <beam_topic_0>dvl_sonar0</beam_topic_0>
      <beam_topic_1>dvl_sonar1</beam_topic_1>
      <beam_topic_2>dvl_sonar2</beam_topic_2>
      <beam_topic_3>dvl_sonar3</beam_topic_3>
    </plugin>
  </gazebo>
  <!-- </xacro:if> -->
  <link name="puddles/pressure_link">
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="1e-06" radius="1e-06"/>
      </geometry>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
    </collision>
  </link>
  <joint name="puddles/pressure_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.43815 -0.1397 0.13335"/>
    <parent link="puddles/origin"/>
    <child link="puddles/pressure_link"/>
    <limit effort="0" lower="0" upper="0" velocity="0"/>
    <axis xyz="1 0 0"/>
  </joint>
  <gazebo>
    <plugin filename="libuuv_gazebo_ros_subsea_pressure_plugin.so" name="libuuv_gazebo_subseapressure_plugin">
      <robot_namespace>puddles</robot_namespace>
      <!-- (string, required): ros namespace in which the messages are published -->
      <link_name>puddles/pressure_link</link_name>
      <sensor_topic>depth/pressure</sensor_topic>
      <update_rate>20</update_rate>
      <saturation>300</saturation>
      <!-- measurement range [kPa] -->
      <noise_sigma>0.029419140000000003</noise_sigma>
      <!-- measurement stddev [kPa] -->
      <noise_amplitude>1</noise_amplitude>
      <estimate_depth_on>False</estimate_depth_on>
      <!-- infer depth? -->
      <standard_pressure>101.325</standard_pressure>
      <!-- pressure at sea level (depth 0 m) [kPa] -->
      <kPa_per_meter>9.80638</kPa_per_meter>
      <!-- increase in pressure [kPa] per [m] in increased depth -->
      <enable_gazebo_messages>false</enable_gazebo_messages>
    </plugin>
  </gazebo>
  <!-- </xacro:if> -->
  <!-- IMU link -->
  <link name="puddles/imu_link">
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
  </link>
  <link name="puddles/imu_revolute_link">
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
  </link>
  <!-- IMU joint -->
  <joint name="puddles/imu_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0.69215 -0.19685 0.33"/>
    <parent link="puddles/origin"/>
    <child link="puddles/imu_link"/>
  </joint>
  <joint name="puddles/imu_revolute_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.69215 -0.19685 0.33"/>
    <parent link="puddles/origin"/>
    <child link="puddles/imu_revolute_link"/>
    <limit effort="0" lower="0" upper="0" velocity="0"/>
    <axis xyz="1 0 0"/>
  </joint>
  <gazebo>
    <plugin filename="libuuv_gazebo_ros_imu_plugin.so" name="libuuv_gazebo_imu_plugin">
      <!-- A good description of the IMU parameters can be found in the kalibr documentation:
           https://github.com/ethz-asl/kalibr/wiki/IMU-Noise-Model-and-Intrinsics -->
      <robot_namespace>puddles</robot_namespace>
      <!-- (string, required): ros namespace in which the messages are published -->
      <link_name>puddles/imu_revolute_link</link_name>
      <!-- (string, required): name of the body which holds the IMU sensor -->
      <sensor_topic>imu/data/sim</sensor_topic>
      <!-- (string): name of the sensor output topic and prefix of service names (defaults to imu) -->
      <gyroscope_noise_density>0.0003394</gyroscope_noise_density>
      <!-- Gyroscope noise density (two-sided spectrum) [rad/s/sqrt(Hz)] -->
      <gyroscope_random_walk>3.8785e-05</gyroscope_random_walk>
      <!-- Gyroscope bias random walk [rad/s/s/sqrt(Hz)] -->
      <gyroscope_bias_correlation_time>1000.0</gyroscope_bias_correlation_time>
      <!-- Gyroscope bias correlation time constant [s] -->
      <gyroscope_turn_on_bias_sigma>0.0087</gyroscope_turn_on_bias_sigma>
      <!-- Gyroscope turn on bias standard deviation [rad/s] -->
      <accelerometer_noise_density>0.004</accelerometer_noise_density>
      <!-- Accelerometer noise density (two-sided spectrum) [m/s^2/sqrt(Hz)] -->
      <accelerometer_random_walk>0.006</accelerometer_random_walk>
      <!-- Accelerometer bias random walk. [m/s^2/s/sqrt(Hz)] -->
      <accelerometer_bias_correlation_time>300.0</accelerometer_bias_correlation_time>
      <!-- Accelerometer bias correlation time constant [s] -->
      <accelerometer_turn_on_bias_sigma>0.196</accelerometer_turn_on_bias_sigma>
      <!-- Accelerometer turn on bias standard deviation [m/s^2] -->
      <orientation_noise>0.01</orientation_noise>
      <update_rate>100</update_rate>
      <!-- Update frequency of accelerometer and gyroscope [s] -->
      <enable_gazebo_messages>false</enable_gazebo_messages>
      <enable_local_ned_frame>False</enable_local_ned_frame>
      <static_reference_frame>world</static_reference_frame>
    </plugin>
  </gazebo>
  <!-- </xacro:if> -->
  <!-- Mount a 3D pose sensor -->
  <link name="puddles/pose_sensor_link">
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
  </link>
  <joint name="puddles/pose_sensor_joint" type="revolute">
    <axis xyz="0 0 1"/>
    <parent link="puddles/base_link"/>
    <child link="puddles/pose_sensor_link"/>
    <limit effort="0" lower="0" upper="0" velocity="0"/>
  </joint>
  <gazebo>
    <plugin filename="libuuv_gazebo_ros_pose_gt_plugin.so" name="pose_3d_plugin">
      <robot_namespace>puddles</robot_namespace>
      <link_name>puddles/base_link</link_name>
      <sensor_topic>pose_gt</sensor_topic>
      <static_reference_frame>world</static_reference_frame>
      <noise_sigma>0</noise_sigma>
      <noise_amplitude>0</noise_amplitude>
      <update_rate>20</update_rate>
      <enable_gazebo_messages>false</enable_gazebo_messages>
      <publish_ned_odom>false</publish_ned_odom>
    </plugin>
  </gazebo>
  <link name="puddles/downward_link">
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="1e-06" radius="1e-06"/>
      </geometry>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
    </collision>
  </link>
  <joint name="puddles/downward_joint" type="fixed">
    <origin rpy="0 1.570796 0" xyz="0.476 -0.181 0.127"/>
    <parent link="puddles/origin"/>
    <child link="puddles/downward_link"/>
  </joint>
  <link name="puddles/downward_optical"/>
  <joint name="puddles/downward_optical_joint" type="fixed">
    <parent link="puddles/downward_link"/>
    <child link="puddles/downward_optical"/>
    <origin rpy="-1.5707963267948966 0 -1.5707963267948966"/>
  </joint>
  <gazebo reference="puddles/downward_link">
    <sensor name="downward" type="camera">
      <camera>
        <horizontal_fov>1.8</horizontal_fov>
        <image>
          <width>644</width>
          <height>482</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.05</near>
          <far>3000</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.02</stddev>
        </noise>
        <!-- <distortion>
                <k1>${k1l}</k1>
                <k2>${k2l}</k2>
                <k3>${k3l}</k3>
                <p1>${p1l}</p1>
                <p2>${p2l}</p2>
                <center>0.5 0.5</center>
              </distortion> -->
      </camera>
      <plugin filename="libgazebo_ros_camera.so" name="downward_controller">
        <alwaysOn>true</alwaysOn>
        <updateRate>30</updateRate>
        <cameraName>downward</cameraName>
        <imageTopicName>image_raw</imageTopicName>
        <cameraInfoTopicName>camera_info</cameraInfoTopicName>
        <frameName>puddles/downward_optical</frameName>
        <hackBaseline>0</hackBaseline>
        <!-- <distortionK1>${k1l}</distortionK1>
              <distortionK2>${k2l}</distortionK2>
              <distortionK3>${k3l}</distortionK3>
              <distortionT1>${p1l}</distortionT1>
              <distortionT2>${p2l}</distortionT2> -->
      </plugin>
      <always_on>1</always_on>
      <update_rate>30</update_rate>
    </sensor>
  </gazebo>
  <link name="puddles/stereo/base_link">
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="1e-06" radius="1e-06"/>
      </geometry>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
    </collision>
  </link>
  <joint name="puddles/stereo/base_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0.835025 -0.1381125 0.2714625"/>
    <parent link="puddles/origin"/>
    <child link="puddles/stereo/base_link"/>
  </joint>
  <link name="puddles/stereo/left_link">
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="1e-06" radius="1e-06"/>
      </geometry>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
    </collision>
  </link>
  <joint name="puddles/stereo/left_joint" type="fixed">
    <origin xyz="0 0 0"/>
    <parent link="puddles/stereo/base_link"/>
    <child link="puddles/stereo/left_link"/>
  </joint>
  <link name="puddles/stereo/left_optical"/>
  <joint name="puddles/stereo/left_optical_joint" type="fixed">
    <parent link="puddles/stereo/left_link"/>
    <child link="puddles/stereo/left_optical"/>
    <origin rpy="-1.5707963267948966 0 -1.5707963267948966"/>
  </joint>
  <gazebo reference="puddles/stereo/left_link">
    <sensor name="stereo/left" type="camera">
      <camera>
        <horizontal_fov>1.418</horizontal_fov>
        <image>
          <width>1280</width>
          <height>720</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.05</near>
          <far>3000</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.02</stddev>
        </noise>
        <!-- <distortion>
                <k1>${k1l}</k1>
                <k2>${k2l}</k2>
                <k3>${k3l}</k3>
                <p1>${p1l}</p1>
                <p2>${p2l}</p2>
                <center>0.5 0.5</center>
              </distortion> -->
      </camera>
      <plugin filename="libgazebo_ros_camera.so" name="stereo/left_controller">
        <alwaysOn>true</alwaysOn>
        <updateRate>60</updateRate>
        <cameraName>stereo/left</cameraName>
        <imageTopicName>image_raw</imageTopicName>
        <cameraInfoTopicName>camera_info</cameraInfoTopicName>
        <frameName>puddles/stereo/left_optical</frameName>
        <hackBaseline>0.12</hackBaseline>
        <!-- <distortionK1>${k1l}</distortionK1>
              <distortionK2>${k2l}</distortionK2>
              <distortionK3>${k3l}</distortionK3>
              <distortionT1>${p1l}</distortionT1>
              <distortionT2>${p2l}</distortionT2> -->
      </plugin>
      <always_on>1</always_on>
      <update_rate>60</update_rate>
    </sensor>
  </gazebo>
  <link name="puddles/stereo/right_link">
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="1e-06" radius="1e-06"/>
      </geometry>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
    </collision>
  </link>
  <joint name="puddles/stereo/right_joint" type="fixed">
    <origin xyz="0 -0.12 0"/>
    <parent link="puddles/stereo/left_link"/>
    <child link="puddles/stereo/right_link"/>
  </joint>
  <link name="puddles/stereo/right_optical"/>
  <joint name="puddles/stereo/right_optical_joint" type="fixed">
    <parent link="puddles/stereo/right_link"/>
    <child link="puddles/stereo/right_optical"/>
    <origin rpy="-1.5707963267948966 0 -1.5707963267948966"/>
  </joint>
  <gazebo reference="puddles/stereo/right_link">
    <sensor name="stereo/right" type="camera">
      <camera>
        <horizontal_fov>1.418</horizontal_fov>
        <image>
          <width>1280</width>
          <height>720</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.05</near>
          <far>3000</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.02</stddev>
        </noise>
        <!-- <distortion>
                <k1>${k1l}</k1>
                <k2>${k2l}</k2>
                <k3>${k3l}</k3>
                <p1>${p1l}</p1>
                <p2>${p2l}</p2>
                <center>0.5 0.5</center>
              </distortion> -->
      </camera>
      <plugin filename="libgazebo_ros_camera.so" name="stereo/right_controller">
        <alwaysOn>true</alwaysOn>
        <updateRate>60</updateRate>
        <cameraName>stereo/right</cameraName>
        <imageTopicName>image_raw</imageTopicName>
        <cameraInfoTopicName>camera_info</cameraInfoTopicName>
        <frameName>puddles/stereo/right_optical</frameName>
        <hackBaseline>0.12</hackBaseline>
        <!-- <distortionK1>${k1l}</distortionK1>
              <distortionK2>${k2l}</distortionK2>
              <distortionK3>${k3l}</distortionK3>
              <distortionT1>${p1l}</distortionT1>
              <distortionT2>${p2l}</distortionT2> -->
      </plugin>
      <always_on>1</always_on>
      <update_rate>60</update_rate>
    </sensor>
  </gazebo>
  <!-- IMU link -->
  <link name="puddles/stereo/imu_link">
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
  </link>
  <link name="puddles/stereo/imu_revolute_link">
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
  </link>
  <!-- IMU joint -->
  <joint name="puddles/stereo/imu_joint" type="fixed">
    <origin rpy="1.5707963267948966 0 -1.5707963267948966" xyz="0 -0.06 0"/>
    <parent link="puddles/stereo/base_link"/>
    <child link="puddles/stereo/imu_link"/>
  </joint>
  <joint name="puddles/stereo/imu_revolute_joint" type="revolute">
    <origin rpy="1.5707963267948966 0 -1.5707963267948966" xyz="0 -0.06 0"/>
    <parent link="puddles/stereo/base_link"/>
    <child link="puddles/stereo/imu_revolute_link"/>
    <limit effort="0" lower="0" upper="0" velocity="0"/>
    <axis xyz="1 0 0"/>
  </joint>
  <gazebo>
    <plugin filename="libuuv_gazebo_ros_imu_plugin.so" name="libuuv_gazebo_imu_plugin">
      <!-- A good description of the IMU parameters can be found in the kalibr documentation:
           https://github.com/ethz-asl/kalibr/wiki/IMU-Noise-Model-and-Intrinsics -->
      <robot_namespace>puddles/stereo</robot_namespace>
      <!-- (string, required): ros namespace in which the messages are published -->
      <link_name>puddles/stereo/imu_revolute_link</link_name>
      <!-- (string, required): name of the body which holds the IMU sensor -->
      <sensor_topic>imu/data_raw/sim</sensor_topic>
      <!-- (string): name of the sensor output topic and prefix of service names (defaults to imu) -->
      <gyroscope_noise_density>0.0003394</gyroscope_noise_density>
      <!-- Gyroscope noise density (two-sided spectrum) [rad/s/sqrt(Hz)] -->
      <gyroscope_random_walk>3.8785e-05</gyroscope_random_walk>
      <!-- Gyroscope bias random walk [rad/s/s/sqrt(Hz)] -->
      <gyroscope_bias_correlation_time>1000.0</gyroscope_bias_correlation_time>
      <!-- Gyroscope bias correlation time constant [s] -->
      <gyroscope_turn_on_bias_sigma>0.0087</gyroscope_turn_on_bias_sigma>
      <!-- Gyroscope turn on bias standard deviation [rad/s] -->
      <accelerometer_noise_density>0.004</accelerometer_noise_density>
      <!-- Accelerometer noise density (two-sided spectrum) [m/s^2/sqrt(Hz)] -->
      <accelerometer_random_walk>0.006</accelerometer_random_walk>
      <!-- Accelerometer bias random walk. [m/s^2/s/sqrt(Hz)] -->
      <accelerometer_bias_correlation_time>300.0</accelerometer_bias_correlation_time>
      <!-- Accelerometer bias correlation time constant [s] -->
      <accelerometer_turn_on_bias_sigma>0.196</accelerometer_turn_on_bias_sigma>
      <!-- Accelerometer turn on bias standard deviation [m/s^2] -->
      <orientation_noise>0.01</orientation_noise>
      <update_rate>200</update_rate>
      <!-- Update frequency of accelerometer and gyroscope [s] -->
      <enable_gazebo_messages>false</enable_gazebo_messages>
      <enable_local_ned_frame>False</enable_local_ned_frame>
      <static_reference_frame>world</static_reference_frame>
    </plugin>
  </gazebo>
  <!-- TODO: Add gazebo camera plugin http://gazebosim.org/tutorials/?tut=ros_depth_camera -->
  <!-- imu plugin is already here; We launch the mynt imu with the same macro as our original macro -->
  <joint name="puddles/thruster_0_joint" type="continuous">
    <origin rpy="0.0 -1.57079 0.0" xyz="0.08255 -0.3683 0.161925"/>
    <axis xyz="1 0 0"/>
    <parent link="puddles/origin"/>
    <child link="puddles/thruster_0"/>
  </joint>
  <link name="puddles/thruster_0">
    <visual>
      <geometry>
        <mesh filename="package://riptide_descriptions/meshes/Propeller.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="1e-06" radius="1e-06"/>
      </geometry>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
    </collision>
  </link>
  <gazebo>
    <plugin filename="libuuv_thruster_ros_plugin.so" name="puddles_0_thruster_model">
      <linkName>puddles/thruster_0</linkName>
      <jointName>puddles/thruster_0_joint</jointName>
      <thrusterID>0</thrusterID>
      <dynamics>
        <type>ZeroOrder</type>
      </dynamics>
      <conversion>
        <type>Basic</type>
        <rotorConstant>0.01</rotorConstant>
      </conversion>
    </plugin>
  </gazebo>
  <gazebo reference="puddles/thruster_0">
    <selfCollide>false</selfCollide>
  </gazebo>
  <joint name="puddles/thruster_1_joint" type="continuous">
    <origin rpy="0.0 -1.57079 0.0" xyz="0.7747 -0.3683 0.161925"/>
    <axis xyz="1 0 0"/>
    <parent link="puddles/origin"/>
    <child link="puddles/thruster_1"/>
  </joint>
  <link name="puddles/thruster_1">
    <visual>
      <geometry>
        <mesh filename="package://riptide_descriptions/meshes/Propeller.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="1e-06" radius="1e-06"/>
      </geometry>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
    </collision>
  </link>
  <gazebo>
    <plugin filename="libuuv_thruster_ros_plugin.so" name="puddles_1_thruster_model">
      <linkName>puddles/thruster_1</linkName>
      <jointName>puddles/thruster_1_joint</jointName>
      <thrusterID>1</thrusterID>
      <dynamics>
        <type>ZeroOrder</type>
      </dynamics>
      <conversion>
        <type>Basic</type>
        <rotorConstant>0.01</rotorConstant>
      </conversion>
    </plugin>
  </gazebo>
  <gazebo reference="puddles/thruster_1">
    <selfCollide>false</selfCollide>
  </gazebo>
  <joint name="puddles/thruster_2_joint" type="continuous">
    <origin rpy="0.0 0.0 -2.35619" xyz="0.8255 -0.48895 0.257175"/>
    <axis xyz="1 0 0"/>
    <parent link="puddles/origin"/>
    <child link="puddles/thruster_2"/>
  </joint>
  <link name="puddles/thruster_2">
    <visual>
      <geometry>
        <mesh filename="package://riptide_descriptions/meshes/Propeller.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="1e-06" radius="1e-06"/>
      </geometry>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
    </collision>
  </link>
  <gazebo>
    <plugin filename="libuuv_thruster_ros_plugin.so" name="puddles_2_thruster_model">
      <linkName>puddles/thruster_2</linkName>
      <jointName>puddles/thruster_2_joint</jointName>
      <thrusterID>2</thrusterID>
      <dynamics>
        <type>ZeroOrder</type>
      </dynamics>
      <conversion>
        <type>Basic</type>
        <rotorConstant>0.01</rotorConstant>
      </conversion>
    </plugin>
  </gazebo>
  <gazebo reference="puddles/thruster_2">
    <selfCollide>false</selfCollide>
  </gazebo>
  <joint name="puddles/thruster_3_joint" type="continuous">
    <origin rpy="0.0 0.0 -0.7854" xyz="0.03175 -0.48895 0.257175"/>
    <axis xyz="1 0 0"/>
    <parent link="puddles/origin"/>
    <child link="puddles/thruster_3"/>
  </joint>
  <link name="puddles/thruster_3">
    <visual>
      <geometry>
        <mesh filename="package://riptide_descriptions/meshes/Propeller.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="1e-06" radius="1e-06"/>
      </geometry>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
    </collision>
  </link>
  <gazebo>
    <plugin filename="libuuv_thruster_ros_plugin.so" name="puddles_3_thruster_model">
      <linkName>puddles/thruster_3</linkName>
      <jointName>puddles/thruster_3_joint</jointName>
      <thrusterID>3</thrusterID>
      <dynamics>
        <type>ZeroOrder</type>
      </dynamics>
      <conversion>
        <type>Basic</type>
        <rotorConstant>0.01</rotorConstant>
      </conversion>
    </plugin>
  </gazebo>
  <gazebo reference="puddles/thruster_3">
    <selfCollide>false</selfCollide>
  </gazebo>
  <joint name="puddles/thruster_4_joint" type="continuous">
    <origin rpy="0.0 -1.57079 0.0" xyz="0.7747 0 0.161925"/>
    <axis xyz="1 0 0"/>
    <parent link="puddles/origin"/>
    <child link="puddles/thruster_4"/>
  </joint>
  <link name="puddles/thruster_4">
    <visual>
      <geometry>
        <mesh filename="package://riptide_descriptions/meshes/Propeller.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="1e-06" radius="1e-06"/>
      </geometry>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
    </collision>
  </link>
  <gazebo>
    <plugin filename="libuuv_thruster_ros_plugin.so" name="puddles_4_thruster_model">
      <linkName>puddles/thruster_4</linkName>
      <jointName>puddles/thruster_4_joint</jointName>
      <thrusterID>4</thrusterID>
      <dynamics>
        <type>ZeroOrder</type>
      </dynamics>
      <conversion>
        <type>Basic</type>
        <rotorConstant>0.01</rotorConstant>
      </conversion>
    </plugin>
  </gazebo>
  <gazebo reference="puddles/thruster_4">
    <selfCollide>false</selfCollide>
  </gazebo>
  <joint name="puddles/thruster_5_joint" type="continuous">
    <origin rpy="0.0 -1.57079 0.0" xyz="0.08255 0 0.161925"/>
    <axis xyz="1 0 0"/>
    <parent link="puddles/origin"/>
    <child link="puddles/thruster_5"/>
  </joint>
  <link name="puddles/thruster_5">
    <visual>
      <geometry>
        <mesh filename="package://riptide_descriptions/meshes/Propeller.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="1e-06" radius="1e-06"/>
      </geometry>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
    </collision>
  </link>
  <gazebo>
    <plugin filename="libuuv_thruster_ros_plugin.so" name="puddles_5_thruster_model">
      <linkName>puddles/thruster_5</linkName>
      <jointName>puddles/thruster_5_joint</jointName>
      <thrusterID>5</thrusterID>
      <dynamics>
        <type>ZeroOrder</type>
      </dynamics>
      <conversion>
        <type>Basic</type>
        <rotorConstant>0.01</rotorConstant>
      </conversion>
    </plugin>
  </gazebo>
  <gazebo reference="puddles/thruster_5">
    <selfCollide>false</selfCollide>
  </gazebo>
  <joint name="puddles/thruster_6_joint" type="continuous">
    <origin rpy="0.0 0.0 2.35619" xyz="0.8255 0.12065 0.257175"/>
    <axis xyz="1 0 0"/>
    <parent link="puddles/origin"/>
    <child link="puddles/thruster_6"/>
  </joint>
  <link name="puddles/thruster_6">
    <visual>
      <geometry>
        <mesh filename="package://riptide_descriptions/meshes/Propeller.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="1e-06" radius="1e-06"/>
      </geometry>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
    </collision>
  </link>
  <gazebo>
    <plugin filename="libuuv_thruster_ros_plugin.so" name="puddles_6_thruster_model">
      <linkName>puddles/thruster_6</linkName>
      <jointName>puddles/thruster_6_joint</jointName>
      <thrusterID>6</thrusterID>
      <dynamics>
        <type>ZeroOrder</type>
      </dynamics>
      <conversion>
        <type>Basic</type>
        <rotorConstant>0.01</rotorConstant>
      </conversion>
    </plugin>
  </gazebo>
  <gazebo reference="puddles/thruster_6">
    <selfCollide>false</selfCollide>
  </gazebo>
  <joint name="puddles/thruster_7_joint" type="continuous">
    <origin rpy="0.0 0.0 0.7854" xyz="0.03175 0.12065 0.257175"/>
    <axis xyz="1 0 0"/>
    <parent link="puddles/origin"/>
    <child link="puddles/thruster_7"/>
  </joint>
  <link name="puddles/thruster_7">
    <visual>
      <geometry>
        <mesh filename="package://riptide_descriptions/meshes/Propeller.dae" scale="1 1 1"/>
      </geometry>
    </visual>
    <inertial>
      <mass value="0.00001"/>
      <inertia ixx="0.000001" ixy="0.0" ixz="0.0" iyy="0.000001" iyz="0.0" izz="0.000001"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="1e-06" radius="1e-06"/>
      </geometry>
      <origin rpy="0 1.5707963267948966 0" xyz="0 0 0"/>
    </collision>
  </link>
  <gazebo>
    <plugin filename="libuuv_thruster_ros_plugin.so" name="puddles_7_thruster_model">
      <linkName>puddles/thruster_7</linkName>
      <jointName>puddles/thruster_7_joint</jointName>
      <thrusterID>7</thrusterID>
      <dynamics>
        <type>ZeroOrder</type>
      </dynamics>
      <conversion>
        <type>Basic</type>
        <rotorConstant>0.01</rotorConstant>
      </conversion>
    </plugin>
  </gazebo>
  <gazebo reference="puddles/thruster_7">
    <selfCollide>false</selfCollide>
  </gazebo>
</robot>
